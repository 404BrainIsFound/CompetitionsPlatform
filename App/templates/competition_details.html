<!-- competition_details.html -->
{% extends "layout.html" %}
{% block title %}Competition Details{% endblock %}
{% block page %}UWI Competitions Platform{% endblock %}

{{ super() }}

{% block content %}

<style>
    .competition-details {
        margin-top: 20px;
    }

    .card {
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 10px;
        margin-bottom: 10px;
        background-color: #fff;
        transition: box-shadow 0.3s;
        color: black;
    }

    .card:hover {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    }

    .teams li {
        list-style-type: none;
    }
</style>
<div style="display: flex;">
    <div>
        <center><h2 style="margin-left: 50px; color: white;">Competition Details</h2></center>
    </div>
    <div>
        {% if session['user_type'] == 'moderator' and moderator in competition.moderators %}
        <button type="button" style="background-color: black; padding: 5px; margin-left: 50px; margin-top: 50px; height: 35px; border-radius: 15px;">
            <a style="color: white" href="{{ url_for('comp_views.add_competition_results') }}">Add Results</a>
        </button>
        <button type="button" style="background-color: black; padding: 5px; margin-left: 50px; margin-top: 50px; height: 35px; border-radius: 15px;">
            <a style="color: white" href="{{ url_for('comp_views.confirm_results', comp_name=competition.name) }}">Confirm Results</a>
        </button>
        {% endif %}
    </div>
</div>
<div class="container">
    <center> <h1 style="color: white;">{{ competition.name }}</h1> </center>
    
    <div class="competition-details">
        
        <h3 style="color: white;">Teams</h3>
        
        {% for team in competition.teams %}
            
            <div class="card" style="background-color: black;">
                <p><strong>Team ID: </strong> {{team.id}}</p>
                <p><strong>Team Name: </strong> {{team.name}}</p>
                <p><strong>Students: </strong></p>
                
                <ul class="team-members">
                    {% for student in team.students %}
                        <li>{{student.username}} {{student.curr_rank}}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
